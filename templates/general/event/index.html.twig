{% extends "frontend/fullPageLayout.html.twig" %}
{% block title %}{{ 'label.events'|trans }}{% endblock %}
{% block full_page %}
    <h1 class="pageTitle float-left">{{ 'label.events'|trans }}</h1>
    <h3 class="float-right">
        {{ include('inc/button.new.html.twig', {'route': 'general_event_new'}) }}
    </h3>

    <div class="clearfix"></div>

    <!-- Filters modal -->

    <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#eventFiltersModal">
        {{ 'label.filters'|trans }}
    </button>
    {% if filters %}
        <a class="btn btn-outline-secondary" href="{{ path('general_event_clear_filters') }}">
            {{ 'label.resetFilters'|trans }}
        </a>
    {% endif %}


    {#<span> | </span>
    <a class="btn btn-outline-secondary" href="#">
        <i class="fas fa-table"></i>
    </a>
    <a class="btn btn-outline-secondary" href="#">
        <i class="fas fa-th-large"></i>
    </a>#}


    <!-- Modal -->
    <div class="modal fade" id="eventFiltersModal" tabindex="-1" role="dialog" aria-labelledby="eventFiltersModalTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="eventFiltersModalTitle">{{ 'label.events'|trans }}</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{ include('general/event/filters.form.html.twig', {'form': filtersForm}) }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">
                        {{ 'label.cancel'|trans }}
                    </button>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <table class="table table-striped">
        <thead>
        <tr>
            <th>
                {# BNP (home) icon #}
            </th>
            <th>
                {{ 'entityField.eventType'|trans }}
            </th>
            <th>
                <a href="{{ path(app.request.attributes.get('_route'), {'page': paginator.currentPage, 'orderBy': 'production', 'orderDirection': 'asc'}) }}">
                    {{ 'entityField.production'|trans }}
                </a>
            </th>
            <th>
                <a href="{{ path(app.request.attributes.get('_route'), {'page': paginator.currentPage, 'orderBy': 'name', 'orderDirection': 'asc'}) }}">
                    {{ 'entityField.eventName'|trans }}
                </a>
            </th>
            <th>{{ 'entityField.description'|trans }}</th>
            <th>
                <a href="{{ path(app.request.attributes.get('_route'), {'page': paginator.currentPage, 'orderBy': 'time', 'orderDirection': 'asc'}) }}">
                    {{ 'entityField.time'|trans }}
                </a>
            </th>
            <th class="text-center">
                {#{{ 'label.age'|trans }}#}
            </th>
            <th>{# guesting and festival #}</th>
            <th class="text-center">
                {#{{ 'entityField.premiere'|trans }}#}
            </th>
            <th class="text-center">
                {#{{ 'entityField.canceled'|trans }}#}
            </th>

        </tr>
        </thead>
        <tbody>
        {% for event in events %}
            <tr {% if event.canceled %} class="event-canceled" {% elseif event.premiere %} class="event-premiere" {% endif %}>
                <td>{% if not event.externalProduction %}<i class="fas fa-home"></i>{% endif %}</td>
                <td>{{ event.eventType ? event.eventType.name : "" }}</td>
                <td>{{ event.production }}</td>
                <td><a href="{{ path('general_event_show', {'id': event.id}) }}">{{ event.name }}</a></td>
                <td>{{ event.description }}</td>
                <td>{{ event.time ? event.time|date() : ''}}</td>

                {% if event.forAdults %}
                    <td class="text-center"><i class="fas fa-user-tie"></i></td>
                {% elseif event.forChildren %}
                    <td class="text-center"><i class="fas fa-1x fa-child"></i></td>
                {% else %}
                    <td class="text-center"></td>
                {% endif %}
                <td class="text-center">
                    {% if event.guesting or event.festival %}
                        <i class="fas fa-truck"></i>
                    {% endif %}
                    {#{% if event.guesting %}
                        {{ event.guestingTitle }}
                    {% endif %}
                    {% if event.guesting and event.festival %}<br>{% endif %}
                    {% if event.festival %}
                        {{ event.festivalTitle }}
                    {% endif %}#}
                </td>
                <td class="text-center">
                    {% if event.premiere %}
                        <i class="fas fa-theater-masks"></i>
                    {% endif %}
                </td>
                <td class="text-center">
                    {% if event.canceled %}
                        <i class="fas fa-ban"></i>
                    {% endif %}
                </td>

            </tr>
        {% else %}
            <tr>
                <td colspan="13">{{ 'label.noRecords'|trans }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% if paginator.hasToPaginate %}
        {{ include('inc/paginator.html.twig') }}
    {% endif %}
{% endblock %}